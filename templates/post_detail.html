{% extends "layout.html" %}
{% block content %}
<link rel="stylesheet" href="{{url_for('static', filename='bin/css/post_detail.css')}}">
<div class="post-detail">
  <h2>{{post.title}}</h2>

  {% if session.get('is_admin') %}
  <div class="fixed">
    <div>{{post.status}}</div>
    <a href="/edit_post/{{post.id}}">编辑</a>
  </div>
  {% endif %}

  <div class="post-info-wrapper">
    <div class="post-info">
      <span class="name">{{post.author.name}}</span>
      <span class="on">created on</span>
      <time class="create-time">{{post.create_time.strftime('%b %d, %y')}}</time>
      <span class="on">last updated on</span>
      <time class="create-time">{{post.update_time.strftime('%b %d, %y')}}</time>
    </div>
  </div>


  <div class="post-content">
    {{post.content}}
  </div>

  <div>
    Tags:
    {% for tag in post.tags %}
      <a href="/search_by_tag/{{tag}}/1">{{tag}}</a>
    {% endfor %}
  </div>

  <div class="new-comment">
    <form id="new-comment-form">
      <input type="hidden" name="post_id" value="{{post.id}}">
      <div>Email: <input type="text" name="user_email"></div>
      <div>Username: <input type="text" name="username"></div>
      <textarea name="content"></textarea>
      <button id="submit-new-comment">发布！</button>
    </form>
  </div>

  <div class="comments">
    {% for comment in post.comments %}
    <div class="comment">
      <div>{{comment.username}}</div>
      <div>{{comment.content}}</div>
      <div>{{comment.create_time}}</div>
    </div>
    <hr>
    {% endfor %}
  </div>

</div>
<script src="{{url_for('static', filename='bin/js/post.js')}}"></script>
{% endblock %}
